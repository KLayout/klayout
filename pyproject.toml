[tool.cibuildwheel]
build-verbosity = "3"
test-command = [
  "python {package}/testdata/pymod/import_db.py",
  "python {package}/testdata/pymod/import_rdb.py",
  "python {package}/testdata/pymod/import_tl.py",
  "python {package}/testdata/pymod/import_lib.py",
  "python {package}/testdata/pymod/pya_tests.py"
]
# Disable building PyPy wheels on all platforms
skip = "pp* *manylinux*"

[tool.cibuildwheel.linux]
before-all = "source {project}/ci-scripts/docker/docker_prepare.sh"
# environment = { CCACHE_DIR="/host/home/runner/work/klayout/klayout/.ccache" }
archs = ["auto64"]

[tool.cibuildwheel.macos]
# Don't repair macOS wheels
repair-wheel-command = ""